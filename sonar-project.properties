# SonarCloud Configuration for Stone Soup
# See: https://docs.sonarcloud.io/advanced-setup/analysis-parameters/

# Project identification
sonar.projectKey=montge_Stone-Soup
sonar.organization=montge
sonar.projectName=Stone Soup
sonar.projectVersion=1.0

# Source code configuration
sonar.sources=stonesoup,libstonesoup/src,bindings
sonar.tests=stonesoup,libstonesoup/tests,bindings
sonar.test.inclusions=**/test_*.py,**/tests/**/*,**/*_test.rs,**/*Test.java
sonar.sourceEncoding=UTF-8

# Python configuration
sonar.python.version=3.10,3.11,3.12,3.13,3.14
sonar.python.coverage.reportPaths=coverage.xml

# C/C++ configuration (libstonesoup)
# SonarCloud requires a compilation database for C/C++ analysis in manual mode.
# The CI workflow generates compile_commands.json using CMake.
sonar.cfamily.compile-commands=libstonesoup/build/compile_commands.json
sonar.cfamily.gcov.reportsPath=libstonesoup/build/gcov_reports

# Exclusions
sonar.exclusions=\
    **/node_modules/**,\
    **/venv/**,\
    **/.venv/**,\
    **/build/**,\
    **/dist/**,\
    **/*.min.js,\
    **/docs/**,\
    **/__pycache__/**,\
    **/.pytest_cache/**,\
    **/target/**,\
    **/bindings/nodejs/node_modules/**

# Test exclusions (don't analyze tests as production code)
sonar.coverage.exclusions=\
    **/test_*.py,\
    **/tests/**,\
    **/*_test.rs,\
    **/*Test.java,\
    **/conftest.py

# Duplication exclusions
sonar.cpd.exclusions=\
    **/test_*.py,\
    **/tests/**

# Quality gate settings (enforced via SonarCloud UI)
# These are documented here for reference:
# - Overall coverage: >= 90%
# - Branch coverage: >= 80%
# - New code coverage: >= 95%
# - Duplicated lines: < 3%
# - Maintainability rating: A
# - Security rating: A
# - Reliability rating: A

# Language-specific settings

# Java configuration
sonar.java.source=22
sonar.java.binaries=bindings/java/target/classes
sonar.java.coveragePlugin=jacoco
sonar.coverage.jacoco.xmlReportPaths=bindings/java/target/site/jacoco/jacoco.xml

# JavaScript/TypeScript configuration (Node.js bindings)
sonar.javascript.lcov.reportPaths=bindings/nodejs/coverage/lcov.info

# Go configuration
# Note: SonarCloud supports Go analysis but coverage via LCOV
sonar.go.coverage.reportPaths=bindings/go/lcov.info

# C++ bindings coverage (separate from C library)
# Uses the same gcov format as the C library
# Note: C++ headers in bindings/cpp are analyzed with the cfamily plugin

# Rust analysis
# Note: SonarCloud does not natively support Rust analysis.
# Rust coverage is tracked separately via Codecov.
# The LCOV report is generated but used for Codecov, not SonarCloud.
# sonar.rust.coverage.reportPaths=bindings/rust/lcov.info
