# SonarCloud Configuration for Stone Soup
# See: https://docs.sonarcloud.io/advanced-setup/analysis-parameters/

# Project identification
sonar.projectKey=montge_Stone-Soup
sonar.organization=montge
sonar.projectName=Stone Soup
sonar.projectVersion=1.0

# Source code configuration
sonar.sources=stonesoup,libstonesoup/src,bindings
sonar.tests=stonesoup,libstonesoup/tests,bindings
sonar.test.inclusions=**/test_*.py,**/tests/**/*,**/*_test.rs,**/*Test.java
sonar.sourceEncoding=UTF-8

# Python configuration
sonar.python.version=3.10,3.11,3.12,3.13,3.14
sonar.python.coverage.reportPaths=coverage.xml

# C/C++ configuration (libstonesoup)
# SonarCloud requires a compilation database for C/C++ analysis in manual mode.
# The CI workflow generates compile_commands.json using CMake.
sonar.cfamily.compile-commands=libstonesoup/build/compile_commands.json
sonar.cfamily.gcov.reportsPath=libstonesoup/build/gcov_reports

# Exclusions
sonar.exclusions=\
    **/node_modules/**,\
    **/venv/**,\
    **/.venv/**,\
    **/build/**,\
    **/dist/**,\
    **/*.min.js,\
    **/docs/**,\
    **/__pycache__/**,\
    **/.pytest_cache/**,\
    **/target/**,\
    **/bindings/nodejs/node_modules/**

# Test exclusions (don't analyze tests as production code)
sonar.coverage.exclusions=\
    **/test_*.py,\
    **/tests/**,\
    **/*_test.rs,\
    **/*Test.java,\
    **/conftest.py

# Duplication exclusions
sonar.cpd.exclusions=\
    **/test_*.py,\
    **/tests/**

# Rule exclusions for false positives
# S5890: Property descriptor pattern - SonarCloud doesn't understand that Property
#        is a descriptor that returns the typed value at runtime, not a Property instance.
#        This is a fundamental pattern in Stone Soup and affects all component classes.
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5,e6,e7,e8,e9,e10,e11,e12,e13,e14,e15,e16,e17,e18,e19,e20,e21,e22,e23,e24,e25,e26,e27,e28,e29,e30,e31,e32,e33,e34,e35,e36,e37,e38,e39,e40,e41,e42,e43,e44,e45,e46

# Ignore S5890 (type hint mismatch) for all Property declarations
# Stone Soup's Property descriptor returns typed values at runtime, not Property instances
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S5890
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.py

# Ignore S117 (naming convention) for mathematical variable names
# These follow standard mathematical notation (e.g., F for state transition matrix)
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S117
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.py

# Ignore S1244 (float equality) in test files - intentional for test assertions
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S1244
sonar.issue.ignore.multicriteria.e3.resourceKey=**/test_*.py,**/tests/**

# Ignore S7498 (constructor vs literal) - stylistic preference, not a bug
# Many legitimate uses of list(), dict() for conversion from iterators
sonar.issue.ignore.multicriteria.e4.ruleKey=python:S7498
sonar.issue.ignore.multicriteria.e4.resourceKey=**/*.py

# Ignore S6711 (numpy.random.Generator) - legacy code uses np.random functions
# Changing would require significant refactoring with no functional benefit
sonar.issue.ignore.multicriteria.e5.ruleKey=python:S6711
sonar.issue.ignore.multicriteria.e5.resourceKey=**/*.py

# Ignore S1135 (TODO comments) - these are intentional markers for future work
sonar.issue.ignore.multicriteria.e6.ruleKey=python:S1135
sonar.issue.ignore.multicriteria.e6.resourceKey=**/*.py

# Ignore S905 (no side effects) - often used for demonstration in tutorials
sonar.issue.ignore.multicriteria.e7.ruleKey=python:S905
sonar.issue.ignore.multicriteria.e7.resourceKey=**/*.py

# Ignore S125 (commented code) - often used for educational examples and alternatives
sonar.issue.ignore.multicriteria.e8.ruleKey=python:S125
sonar.issue.ignore.multicriteria.e8.resourceKey=**/*.py

# Ignore S7500 (comprehension vs collection) - stylistic preference
sonar.issue.ignore.multicriteria.e9.ruleKey=python:S7500
sonar.issue.ignore.multicriteria.e9.resourceKey=**/*.py

# Ignore S1192 (duplicate strings) - many legitimate repeated strings in docs/messages
sonar.issue.ignore.multicriteria.e10.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e10.resourceKey=**/*.py

# Ignore S6729 (np.where vs np.nonzero) - stylistic preference
sonar.issue.ignore.multicriteria.e11.ruleKey=python:S6729
sonar.issue.ignore.multicriteria.e11.resourceKey=**/*.py

# Ignore S7494 - type annotation style preferences
sonar.issue.ignore.multicriteria.e12.ruleKey=python:S7494
sonar.issue.ignore.multicriteria.e12.resourceKey=**/*.py

# Ignore S3776 (cognitive complexity) - scientific algorithms often have high complexity
sonar.issue.ignore.multicriteria.e13.ruleKey=python:S3776
sonar.issue.ignore.multicriteria.e13.resourceKey=**/*.py

# Ignore S5799 (empty except blocks) - intentional in many cases for fallback behavior
sonar.issue.ignore.multicriteria.e14.ruleKey=python:S5799
sonar.issue.ignore.multicriteria.e14.resourceKey=**/*.py

# Java rule exclusions
# Ignore S2187 (test classes without tests) - test scaffolding/setup classes
sonar.issue.ignore.multicriteria.e15.ruleKey=java:S2187
sonar.issue.ignore.multicriteria.e15.resourceKey=**/*.java

# Ignore S1192 (duplicate strings) for Java - common in tests and messages
sonar.issue.ignore.multicriteria.e16.ruleKey=java:S1192
sonar.issue.ignore.multicriteria.e16.resourceKey=**/*.java

# Ignore S3776 (cognitive complexity) for Java - complex algorithms
sonar.issue.ignore.multicriteria.e17.ruleKey=java:S3776
sonar.issue.ignore.multicriteria.e17.resourceKey=**/*.java

# Go rule exclusions
# Ignore S3776 (cognitive complexity) for Go - complex algorithms
sonar.issue.ignore.multicriteria.e18.ruleKey=go:S3776
sonar.issue.ignore.multicriteria.e18.resourceKey=**/*.go

# Ignore S1192 (duplicate strings) for Go
sonar.issue.ignore.multicriteria.e19.ruleKey=go:S1192
sonar.issue.ignore.multicriteria.e19.resourceKey=**/*.go

# Rust rule exclusions
# Ignore S3776 (cognitive complexity) for Rust - complex algorithms
sonar.issue.ignore.multicriteria.e20.ruleKey=rust:S3776
sonar.issue.ignore.multicriteria.e20.resourceKey=**/*.rs

# C rule exclusions
# Ignore S134 (deeply nested control flow) - algorithms naturally nested
sonar.issue.ignore.multicriteria.e21.ruleKey=c:S134
sonar.issue.ignore.multicriteria.e21.resourceKey=**/*.c

# Ignore S3776 (cognitive complexity) for C - complex algorithms
sonar.issue.ignore.multicriteria.e22.ruleKey=c:S3776
sonar.issue.ignore.multicriteria.e22.resourceKey=**/*.c

# Ignore S5276 (printf format specifiers) for C - false positives on size_t
sonar.issue.ignore.multicriteria.e23.ruleKey=c:S5276
sonar.issue.ignore.multicriteria.e23.resourceKey=**/*.c

# Ignore S125 (commented code) for C - common in development
sonar.issue.ignore.multicriteria.e24.ruleKey=c:S125
sonar.issue.ignore.multicriteria.e24.resourceKey=**/*.c

# Java unused code exclusions - common in generated/scaffolding code
sonar.issue.ignore.multicriteria.e25.ruleKey=java:S1068
sonar.issue.ignore.multicriteria.e25.resourceKey=**/*.java

sonar.issue.ignore.multicriteria.e26.ruleKey=java:S1144
sonar.issue.ignore.multicriteria.e26.resourceKey=**/*.java

sonar.issue.ignore.multicriteria.e27.ruleKey=java:S1172
sonar.issue.ignore.multicriteria.e27.resourceKey=**/*.java

# Kotlin exclusions
sonar.issue.ignore.multicriteria.e28.ruleKey=kotlin:S6624
sonar.issue.ignore.multicriteria.e28.resourceKey=**/*.kt

# Python branch logic exclusions - often intentional in algorithms
sonar.issue.ignore.multicriteria.e29.ruleKey=python:S3923
sonar.issue.ignore.multicriteria.e29.resourceKey=**/*.py

sonar.issue.ignore.multicriteria.e30.ruleKey=python:S5914
sonar.issue.ignore.multicriteria.e30.resourceKey=**/*.py

sonar.issue.ignore.multicriteria.e31.ruleKey=python:S1871
sonar.issue.ignore.multicriteria.e31.resourceKey=**/*.py

sonar.issue.ignore.multicriteria.e32.ruleKey=python:S1764
sonar.issue.ignore.multicriteria.e32.resourceKey=**/*.py

# Duplicate S1244 exclusion for non-test Python files (tests already excluded in e3)
sonar.issue.ignore.multicriteria.e33.ruleKey=python:S1244
sonar.issue.ignore.multicriteria.e33.resourceKey=**/*.py

# Java naming convention exclusions - mathematical/scientific notation
sonar.issue.ignore.multicriteria.e34.ruleKey=java:S117
sonar.issue.ignore.multicriteria.e34.resourceKey=**/*.java

sonar.issue.ignore.multicriteria.e35.ruleKey=java:S3008
sonar.issue.ignore.multicriteria.e35.resourceKey=**/*.java

sonar.issue.ignore.multicriteria.e36.ruleKey=java:S3077
sonar.issue.ignore.multicriteria.e36.resourceKey=**/*.java

sonar.issue.ignore.multicriteria.e37.ruleKey=java:S3400
sonar.issue.ignore.multicriteria.e37.resourceKey=**/*.java

# Python additional exclusions
sonar.issue.ignore.multicriteria.e38.ruleKey=python:S116
sonar.issue.ignore.multicriteria.e38.resourceKey=**/*.py

sonar.issue.ignore.multicriteria.e39.ruleKey=python:S1481
sonar.issue.ignore.multicriteria.e39.resourceKey=**/*.py

sonar.issue.ignore.multicriteria.e40.ruleKey=python:S1940
sonar.issue.ignore.multicriteria.e40.resourceKey=**/*.py

sonar.issue.ignore.multicriteria.e41.ruleKey=python:S7504
sonar.issue.ignore.multicriteria.e41.resourceKey=**/*.py

# C additional exclusions
sonar.issue.ignore.multicriteria.e42.ruleKey=c:S1135
sonar.issue.ignore.multicriteria.e42.resourceKey=**/*.c

sonar.issue.ignore.multicriteria.e43.ruleKey=c:S995
sonar.issue.ignore.multicriteria.e43.resourceKey=**/*.c

# Python commented code exclusion
sonar.issue.ignore.multicriteria.e44.ruleKey=python:S125
sonar.issue.ignore.multicriteria.e44.resourceKey=**/*.py

# Additional Go rule for duplicate strings
sonar.issue.ignore.multicriteria.e45.ruleKey=go:S1192
sonar.issue.ignore.multicriteria.e45.resourceKey=**/*.go

# Rust duplicate strings
sonar.issue.ignore.multicriteria.e46.ruleKey=rust:S1192
sonar.issue.ignore.multicriteria.e46.resourceKey=**/*.rs

# Quality gate settings (enforced via SonarCloud UI)
# These are documented here for reference:
# - Overall coverage: >= 90%
# - Branch coverage: >= 80%
# - New code coverage: >= 95%
# - Duplicated lines: < 3%
# - Maintainability rating: A
# - Security rating: A
# - Reliability rating: A

# Language-specific settings

# Java configuration
sonar.java.source=22
sonar.java.binaries=bindings/java/target/classes
sonar.java.coveragePlugin=jacoco
sonar.coverage.jacoco.xmlReportPaths=bindings/java/target/site/jacoco/jacoco.xml

# JavaScript/TypeScript configuration (Node.js bindings)
sonar.javascript.lcov.reportPaths=bindings/nodejs/coverage/lcov.info

# Go configuration
# Note: SonarCloud supports Go analysis but coverage via LCOV
sonar.go.coverage.reportPaths=bindings/go/lcov.info

# C++ bindings coverage (separate from C library)
# Uses the same gcov format as the C library
# Note: C++ headers in bindings/cpp are analyzed with the cfamily plugin

# Rust analysis
# Note: SonarCloud does not natively support Rust analysis.
# Rust coverage is tracked separately via Codecov.
# The LCOV report is generated but used for Codecov, not SonarCloud.
# sonar.rust.coverage.reportPaths=bindings/rust/lcov.info
